/*
 *  author: Suhas Vittal
 *  date:   4 December 2024
 * */

#ifndef DRAM_ADDRESS_h
#define DRAM_ADDRESS_h

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

size_t dram_channel(uint64_t);
size_t dram_rank(uint64_t);
size_t dram_bankgroup(uint64_t);
size_t dram_bank(uint64_t);
size_t dram_row(uint64_t);

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

#ifdef MOP
#include "mop.inl"
#endif

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////

inline size_t get_bank_idx(uint64_t addr)
{
    return dram_bank(addr) 
            + dram_bankgroup(addr)*DRAM_BANKS 
            + dram_rank(addr)*DRAM_BANKGROUPS*DRAM_BANKS;
}

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
